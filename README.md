# Security Tutorial (SSL/TLS)

SSL is abbreviation of Secure Sockets Layer and TLS is abbreviation of Transport Layer Security. Also, SSL was
deprecated in 1999 but, it is still user to refer for related technologies.</b>
SSL and TLS are protocols to make secure (authenticated and encrypted) connection between network nodes. Current TLS
version is [1.3](https://www.rfc-editor.org/rfc/rfc8446) and standard port is 443.

## Prerequisite

* [OpenSSL](https://www.openssl.org/)
* [Docker](https://www.docker.com/)
* Podman
  * [Podman](https://podman.io/)
  * [Podman-compose](https://github.com/containers/podman-compose)
  * [Podman Desktop](https://podman-desktop.io/)

## General Concepts

### Entity

Entity means a client in server/client relation that needs to interact over a secure channel, such as websites,
companies, individual persons.

### Certificate authority (CA)

CA is an organization that is responsible to validate the identities of entities.

### Public/Private Key

The pair key is generated by service owner (Server). Private key must be in a safe place and, it does not share with the
other entities and public key is a part should be shared with other entities.</b>
Data are encrypted by public key and decrypt with private key.

### Certificate

Certificate is digital document that use for binding the identity of an entity to pair keys. SSL certificates are a type
of X.509 Certificate (X.509 is a standard format for public key certificates).

### Certificate signing Request

### Chain of Trust

### Trust Anchor

### Intermediate Certificate

### PKI

[comment]: <> (Your comment text)

```shell
#!/bin/bash

openssl version
# step 1: ca
# generate private key and self-signed certificate
openssl req -x509 -newkey rsa:4096 -days 365 -nodes -keyout ca-key.pem -out ca-cert.pem -subj "/C=IR/ST=Tehran/L=Tehran/O=CA Home/OU=Developing/CN=*.ca.home/emailAddress=ca.home@gmail.com"
openssl x509 -in ca-cert.pem -noout -text

# step 2: server
# generate private key and certificate signing request (CSR)
openssl req -newkey rsa:4096 -nodes -keyout server-key.pem -out server-req.pem -subj "/C=IR/ST=Tehran/L=Tehran/O=Server Home/OU=Developing/CN=*.server.home/emailAddress=server.home@gmail.com"

# step 3: sign
# sign server's CSR by CA's private key
echo subjectAltName=DNS:*.server.home.com,DNS:localhost,IP:0.0.0.0 > server-ext.cnf
openssl x509 -req -in server-req.pem -days 365 -CA ca-cert.pem -CAkey ca-key.pem -CAcreateserial -out server-cert.pem -extfile server-ext.cnf
openssl x509 -in server-cert.pem -noout -text

# verify the server certificate
openssl verify -CAfile ca-cert.pem server-cert.pem
```
